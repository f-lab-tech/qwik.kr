import{i as e,u as t}from"./q-c0df5510.js";const c=[{text:"Non-200 Response",id:"non-200-response",level:1},{text:"404 - Not Found",id:"404---not-found",level:2}],r={title:"Qwik City - Non-200 Response",meta:[],styles:[],links:[]},l={title:"Qwik City - Non-200 Response"};function s(a){const n=Object.assign({h1:"h1",a:"a",span:"span",p:"p",pre:"pre",code:"code",h2:"h2"},a.components);return e(t,{children:[e(n.h1,{id:"non-200-response",children:[e(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#non-200-response",children:e(n.span,{className:"icon icon-link"})}),"Non-200 Response"]}),`
`,e(n.p,{children:"At times it is necessary to respond with HTTP status codes other than 200. In such cases, response handler is the place to determine what status code should be returned."}),`
`,e(n.p,{children:"Assume this file layout."}),`
`,e(n.pre,{children:e(n.code,{children:`src/
\u2514\u2500\u2500 routes/
    \u2514\u2500\u2500 product/
        \u2514\u2500\u2500 [skuId]/
            \u2514\u2500\u2500 index.tsx     # https://example.com/product/1234
`})}),`
`,e(n.h2,{id:"404---not-found",children:[e(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#404---not-found",children:e(n.span,{className:"icon icon-link"})}),"404 - Not Found"]}),`
`,e(n.p,{children:["Let's say that a user does a request to an invalid ",e(n.code,{children:"skuId"})," such as ",e(n.code,{children:"https://example.com/product/999"}),". In this case, we would like to return a 404 HTTP status code and render a 404 page. The place where we determine if the request is valid or not is in the request handler by looking into the database. Even if the response is non-200, the component still gets a chance to render a page (Except in the redirect case.)"]}),`
`,e(n.pre,{children:e(n.code,{className:"language-typescript",children:[e(n.span,{className:"token comment",children:"// File: src/routes/product/[skuId]/index.tsx"}),`
`,e(n.span,{className:"token keyword",children:"import"})," ",e(n.span,{className:"token punctuation",children:"{"})," component$ ",e(n.span,{className:"token punctuation",children:"}"})," ",e(n.span,{className:"token keyword",children:"from"})," ",e(n.span,{className:"token string",children:"'@builder.io/qwik'"}),e(n.span,{className:"token punctuation",children:";"}),`

`,e(n.span,{className:"token keyword",children:"type"})," ",e(n.span,{className:"token class-name",children:"EndpointData"})," ",e(n.span,{className:"token operator",children:"="})," ProductData ",e(n.span,{className:"token operator",children:"|"})," ",e(n.span,{className:"token keyword",children:"null"}),e(n.span,{className:"token punctuation",children:";"}),`

`,e(n.span,{className:"token keyword",children:"interface"})," ",e(n.span,{className:"token class-name",children:"ProductData"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
  skuId`,e(n.span,{className:"token operator",children:":"})," ",e(n.span,{className:"token builtin",children:"string"}),e(n.span,{className:"token punctuation",children:";"}),`
  price`,e(n.span,{className:"token operator",children:":"})," ",e(n.span,{className:"token builtin",children:"number"}),e(n.span,{className:"token punctuation",children:";"}),`
  description`,e(n.span,{className:"token operator",children:":"})," ",e(n.span,{className:"token builtin",children:"string"}),e(n.span,{className:"token punctuation",children:";"}),`
`,e(n.span,{className:"token punctuation",children:"}"}),`
`,e(n.span,{className:"token keyword",children:"export"})," ",e(n.span,{className:"token keyword",children:"const"})," onGet",e(n.span,{className:"token operator",children:":"})," RequestHandler",e(n.span,{className:"token operator",children:"<"}),"EndpointData",e(n.span,{className:"token operator",children:">"})," ",e(n.span,{className:"token operator",children:"="})," ",e(n.span,{className:"token keyword",children:"async"})," ",e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:"{"})," params",e(n.span,{className:"token punctuation",children:","})," response ",e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
  `,e(n.span,{className:"token keyword",children:"const"})," product ",e(n.span,{className:"token operator",children:"="})," ",e(n.span,{className:"token keyword",children:"await"})," ",e(n.span,{className:"token function",children:"loadProductFromDatabase"}),e(n.span,{className:"token punctuation",children:"("}),"params",e(n.span,{className:"token punctuation",children:"."}),"skuId",e(n.span,{className:"token punctuation",children:")"}),e(n.span,{className:"token punctuation",children:";"}),`

  `,e(n.span,{className:"token keyword",children:"if"})," ",e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token operator",children:"!"}),"product",e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
    `,e(n.span,{className:"token comment",children:"// Product data not found"}),`
    `,e(n.span,{className:"token comment",children:"// but the data is still given to the renderer to decide what to do"}),`
    response`,e(n.span,{className:"token punctuation",children:"."}),"status ",e(n.span,{className:"token operator",children:"="})," ",e(n.span,{className:"token number",children:"404"}),e(n.span,{className:"token punctuation",children:";"}),`
    `,e(n.span,{className:"token keyword",children:"return"})," ",e(n.span,{className:"token keyword",children:"null"}),e(n.span,{className:"token punctuation",children:";"}),`
  `,e(n.span,{className:"token punctuation",children:"}"})," ",e(n.span,{className:"token keyword",children:"else"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
    `,e(n.span,{className:"token comment",children:"// ..."}),`
  `,e(n.span,{className:"token punctuation",children:"}"}),`
`,e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token punctuation",children:";"}),`

`,e(n.span,{className:"token keyword",children:"export"})," ",e(n.span,{className:"token keyword",children:"default"})," ",e(n.span,{className:"token function",children:"component$"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
  `,e(n.span,{className:"token keyword",children:"const"})," resource ",e(n.span,{className:"token operator",children:"="})," ",e(n.span,{className:"token generic-function",children:[e(n.span,{className:"token function",children:"useEndpoint"}),e(n.span,{className:"token generic class-name",children:[e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token keyword",children:"typeof"})," onGet",e(n.span,{className:"token operator",children:">"})]})]}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"}),e(n.span,{className:"token punctuation",children:";"})," ",e(n.span,{className:"token comment",children:"//equivalent to useEndpoint<EndpointData>"}),`

  `,e(n.span,{className:"token keyword",children:"if"})," ",e(n.span,{className:"token punctuation",children:"("}),"resource",e(n.span,{className:"token punctuation",children:"."}),"state ",e(n.span,{className:"token operator",children:"=="})," ",e(n.span,{className:"token string",children:"'resolved'"})," ",e(n.span,{className:"token operator",children:"&&"})," ",e(n.span,{className:"token operator",children:"!"}),"resource",e(n.span,{className:"token punctuation",children:"."}),"resolved",e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
    `,e(n.span,{className:"token comment",children:"// Early return for 404"}),`
    `,e(n.span,{className:"token keyword",children:"return"})," ",e(n.span,{className:"token operator",children:"<"}),"div",e(n.span,{className:"token operator",children:">"}),e(n.span,{className:"token number",children:"404"}),e(n.span,{className:"token operator",children:":"})," Product not found",e(n.span,{className:"token operator",children:"!"}),e(n.span,{className:"token operator",children:"!"}),e(n.span,{className:"token operator",children:"!"}),e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:"/"}),"div",e(n.span,{className:"token operator",children:">"}),e(n.span,{className:"token punctuation",children:";"}),`
  `,e(n.span,{className:"token punctuation",children:"}"}),`

  `,e(n.span,{className:"token comment",children:"// Normal rendering"}),`
  `,e(n.span,{className:"token keyword",children:"return"})," ",e(n.span,{className:"token punctuation",children:"("}),`
    `,e(n.span,{className:"token operator",children:"<"}),`Resource
      value`,e(n.span,{className:"token operator",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),"resource",e(n.span,{className:"token punctuation",children:"}"}),`
      onPending`,e(n.span,{className:"token operator",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token operator",children:"<"}),"div",e(n.span,{className:"token operator",children:">"}),"Loading",e(n.span,{className:"token operator",children:"..."}),e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:"/"}),"div",e(n.span,{className:"token operator",children:">"}),e(n.span,{className:"token punctuation",children:"}"}),`
      onError`,e(n.span,{className:"token operator",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token operator",children:"<"}),"div",e(n.span,{className:"token operator",children:">"}),"Error",e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:"/"}),"div",e(n.span,{className:"token operator",children:">"}),e(n.span,{className:"token punctuation",children:"}"}),`
      onResolved`,e(n.span,{className:"token operator",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token punctuation",children:"("}),`
        `,e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:">"}),`
          `,e(n.span,{className:"token operator",children:"<"}),"h1",e(n.span,{className:"token operator",children:">"}),"Product",e(n.span,{className:"token operator",children:":"})," ",e(n.span,{className:"token punctuation",children:"{"}),"product",e(n.span,{className:"token punctuation",children:"."}),"productId",e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:"/"}),"h1",e(n.span,{className:"token operator",children:">"}),`
          `,e(n.span,{className:"token operator",children:"<"}),"p",e(n.span,{className:"token operator",children:">"}),"Price",e(n.span,{className:"token operator",children:":"})," ",e(n.span,{className:"token punctuation",children:"{"}),"product",e(n.span,{className:"token punctuation",children:"."}),"price",e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:"/"}),"p",e(n.span,{className:"token operator",children:">"}),`
          `,e(n.span,{className:"token operator",children:"<"}),"p",e(n.span,{className:"token operator",children:">"}),e(n.span,{className:"token punctuation",children:"{"}),"product",e(n.span,{className:"token punctuation",children:"."}),"description",e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:"/"}),"p",e(n.span,{className:"token operator",children:">"}),`
        `,e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token operator",children:"/"}),e(n.span,{className:"token operator",children:">"}),`
      `,e(n.span,{className:"token punctuation",children:")"}),e(n.span,{className:"token punctuation",children:"}"}),`
    `,e(n.span,{className:"token operator",children:"/"}),e(n.span,{className:"token operator",children:">"}),`
  `,e(n.span,{className:"token punctuation",children:")"}),e(n.span,{className:"token punctuation",children:";"}),`
`,e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token punctuation",children:")"}),e(n.span,{className:"token punctuation",children:";"}),`
`]})})]})}function p(a={}){const{wrapper:n}=a.components||{};return n?e(n,Object.assign({},a,{children:e(s,a)})):s(a)}export{p as default,l as frontmatter,r as head,c as headings};
