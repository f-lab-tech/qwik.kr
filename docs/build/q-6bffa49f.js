import{i as n,u as a}from"./q-c0df5510.js";const c=[{text:"Prefetching",id:"prefetching",level:1},{text:"Prefetching Per Page",id:"prefetching-per-page",level:2},{text:"Prefetching Per Interaction",id:"prefetching-per-interaction",level:2},{text:"Prefetch Event",id:"prefetch-event",level:2},{text:"Dispatching a prefetch event",id:"dispatching-a-prefetch-event",level:3}],h={title:"Qwik City Prefetching",meta:[],styles:[],links:[]},s={title:"Qwik City Prefetching"};function i(t){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",em:"em",ul:"ul",li:"li",h2:"h2",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",h3:"h3",pre:"pre"},t.components);return n(a,{children:[n(e.h1,{id:"prefetching",children:[n(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#prefetching",children:n(e.span,{className:"icon icon-link"})}),"Prefetching"]}),`
`,n(e.p,{children:"The goal of Qwik's prefetching is not to prefetch the entire application, but to have already prefetched and cached what's possible at that time. When the Qwik optimizer breaks apart the application, it's able to understand possible user interactions. And from this, it's just as important that it's able to understand what's not possible from user interaction."}),`
`,n(e.p,{children:["For example, an entire rendered application may only be able to click a button, but that also means the entire app could never re-render. Since Qwik is able to understand what's possible, and ",n(e.em,{children:"not"})," possible, it's able to best collect which bundles to prefetch."]}),`
`,n(e.ul,{children:[`
`,n(e.li,{children:n(e.a,{href:"/qwikcity/prefetching/service-worker-prefetching/",children:"Prefetching and caching with a Service Worker"})}),`
`,n(e.li,{children:n(e.a,{href:"/qwikcity/prefetching/request-response-cache/",children:"Caching Request and Response Pairs"})}),`
`,n(e.li,{children:n(e.a,{href:"/qwikcity/prefetching/parallelizing-network-requests/",children:"Parallelizing Network Requests"})}),`
`,n(e.li,{children:[n(e.a,{href:"/docs/advanced/prefetching/",children:"Configuring Prefetching Strategies and Implementations"}),"."]}),`
`]}),`
`,n(e.h2,{id:"prefetching-per-page",children:[n(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#prefetching-per-page",children:n(e.span,{className:"icon icon-link"})}),"Prefetching Per Page"]}),`
`,n(e.p,{children:["Each page load will prefetch bundles that could be executed by the user. For example, let's say that the page has a click listener on a button. When the page loads, the very first thing the service worker does is ensure the bundle for that click listener is prefetched and waiting in the ",n(e.a,{href:"/qwikcity/prefetching/request-response-cache/",children:"cache"}),". When the user clicks the button, and Qwik makes a request to the event listener's bundle, the goal is the bundle is already sitting in the cache ready to execute."]}),`
`,n(e.h2,{id:"prefetching-per-interaction",children:[n(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#prefetching-per-interaction",children:n(e.span,{className:"icon icon-link"})}),"Prefetching Per Interaction"]}),`
`,n(e.p,{children:"You can think of the page load as the first user interaction, which prefetches what the next user interaction could be. When a follow-up interaction happens, such as opening a modal, then Qwik will again emit another prefetch event with additional bundles that could be used since the last interaction happened. Prefetching not only happens on page load but continuously happens as users interact with the application."}),`
`,n(e.h2,{id:"prefetch-event",children:[n(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#prefetch-event",children:n(e.span,{className:"icon icon-link"})}),"Prefetch Event"]}),`
`,n(e.p,{children:["The recommended prefetching strategy is to use a ",n(e.a,{href:"/qwikcity/prefetching/service-worker-prefetching/",children:"service worker"})," to populate the browser's ",n(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Cache",children:"Cache"}),". Qwik itself should be configured to use the ",n(e.a,{href:"/docs/advanced/prefetching/",children:"prefetchEvent"})," implementation, which will dispatch a prefetch event."]}),`
`,n(e.p,{children:["The ",n(e.code,{children:"qprefetch"})," event can contain various detailed data about what to prefetch, such as:"]}),`
`,n(e.table,{children:[n(e.thead,{children:n(e.tr,{children:[n(e.th,{children:"Data"}),n(e.th,{children:"Description"})]})}),n(e.tbody,{children:[n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"bundles"})}),n(e.td,{children:'An array of JavaScript bundle names to prefetch. A "bundle" is a collection of symbols.'})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"symbols"})}),n(e.td,{children:"An array of symbols to prefetch. The service worker already understands which bundles each symbol is a part of."})]}),n(e.tr,{children:[n(e.td,{children:n(e.code,{children:"links"})}),n(e.td,{children:[n(e.em,{children:"Experimental:"})," An array of link ",n(e.code,{children:"hrefs"})," to prefetch."]})]})]})]}),`
`,n(e.h3,{id:"dispatching-a-prefetch-event",children:[n(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#dispatching-a-prefetch-event",children:n(e.span,{className:"icon icon-link"})}),"Dispatching a prefetch event"]}),`
`,n(e.p,{children:["Below is an example of a prefetch event being dispatched. These events are dispatched from Qwik itself and do not require developers to dispatch these events manually. Additionally, the ",n(e.a,{href:"/qwikcity/prefetching/service-worker-prefetching/",children:"service worker"})," will automatically add listeners for these events."]}),`
`,n(e.pre,{children:n(e.code,{className:"language-ts",children:[n(e.span,{className:"token function",children:"dispatchEvent"}),n(e.span,{className:"token punctuation",children:"("}),n(e.span,{className:"token keyword",children:"new"})," ",n(e.span,{className:"token class-name",children:"CustomEvent"}),n(e.span,{className:"token punctuation",children:"("}),n(e.span,{className:"token string",children:'"qprefetch"'}),n(e.span,{className:"token punctuation",children:","})," ",n(e.span,{className:"token punctuation",children:"{"})," detail",n(e.span,{className:"token operator",children:":"})," ",n(e.span,{className:"token punctuation",children:"{"}),`
  bundles`,n(e.span,{className:"token operator",children:":"})," ",n(e.span,{className:"token punctuation",children:"["}),n(e.span,{className:"token operator",children:"..."}),n(e.span,{className:"token punctuation",children:"]"}),`
`,n(e.span,{className:"token punctuation",children:"}"}),n(e.span,{className:"token punctuation",children:"}"}),n(e.span,{className:"token punctuation",children:")"}),n(e.span,{className:"token punctuation",children:")"}),n(e.span,{className:"token punctuation",children:";"}),`
`]})})]})}function l(t={}){const{wrapper:e}=t.components||{};return e?n(e,Object.assign({},t,{children:n(i,t)})):i(t)}export{l as default,s as frontmatter,h as head,c as headings};
