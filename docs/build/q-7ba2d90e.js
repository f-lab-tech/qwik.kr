import{i as e,u as c}from"./q-c0df5510.js";const l=[{text:"QRLs",id:"qrls",level:2},{text:"Declaring callback props",id:"declaring-callback-props",level:2},{text:"Using callback props",id:"using-callback-props",level:2}],o={title:"Passing Closures",meta:[],styles:[],links:[]},i={title:"Passing Closures"};function s(a){const n=Object.assign({p:"p",code:"code",h2:"h2",a:"a",span:"span",ul:"ul",li:"li",pre:"pre"},a.components);return e(c,{children:[e(n.p,{children:["Props must be serializable so that Qwik can resume and render each component independently from other components on the page. This poses a problem if we wish to pass a callback to a child component. Callbacks are functions and functions are not directly serializable, but they are serializable through the ",e(n.code,{children:"$()"})," by converting them to QRLs first."]}),`
`,e(n.h2,{id:"qrls",children:[e(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#qrls",children:e(n.span,{className:"icon icon-link"})}),"QRLs"]}),`
`,e(n.p,{children:["Functions passing across serializable boundaries must be done through QRLs. QRLs are serialized forms of a function. (See ",e(n.a,{href:"/docs/advanced/qrl/",children:"QRL"})," in advanced section.)"]}),`
`,e(n.p,{children:["Qwik has convenience APIs which end in ",e(n.code,{children:"$"})," that are equivalent to calling ",e(n.code,{children:"$()"})," directly. These two lines are equivalent:"]}),`
`,e(n.ul,{children:[`
`,e(n.li,{children:["inline: ",e(n.code,{children:"useWatch$(() => {...}/>"})]}),`
`,e(n.li,{children:["explicit: ",e(n.code,{children:"const callbackQrl = $(() => {...}); useWatchQrl(callbackQrl)"})]}),`
`]}),`
`,e(n.p,{children:"Most of the time we use the first form as it allows us to inline our callbacks directly into the API. But at times it is necessary to use the second form so that we can separate where the function is declared and where it is used."}),`
`,e(n.h2,{id:"declaring-callback-props",children:[e(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#declaring-callback-props",children:e(n.span,{className:"icon icon-link"})}),"Declaring callback props"]}),`
`,e(n.p,{children:"A component can declare a callback in its props by:"}),`
`,e(n.ul,{children:[`
`,e(n.li,{children:["Property that ends in ",e(n.code,{children:"$"})," (as in ",e(n.code,{children:"goodbye$"}),")"]}),`
`,e(n.li,{children:["The type of the property is ",e(n.code,{children:"PropFunction<T>"})," where ",e(n.code,{children:"T"})," is the lazy reference type that the QRL points to (function signature)."]}),`
`]}),`
`,e(n.pre,{children:e(n.code,{className:"language-typescript",children:[e(n.span,{className:"token keyword",children:"interface"})," ",e(n.span,{className:"token class-name",children:"MyComponentProps"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
  goodbye$`,e(n.span,{className:"token operator",children:":"})," PropFunction",e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token keyword",children:"void"}),e(n.span,{className:"token operator",children:">"}),e(n.span,{className:"token punctuation",children:";"}),`
  hello$`,e(n.span,{className:"token operator",children:":"})," PropFunction",e(n.span,{className:"token operator",children:"<"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token keyword",children:"void"}),e(n.span,{className:"token operator",children:">"}),e(n.span,{className:"token punctuation",children:";"}),`
`,e(n.span,{className:"token punctuation",children:"}"}),`

`,e(n.span,{className:"token keyword",children:"export"})," ",e(n.span,{className:"token keyword",children:"const"})," MyComponent ",e(n.span,{className:"token operator",children:"="})," ",e(n.span,{className:"token function",children:"component$"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:"("}),"props",e(n.span,{className:"token operator",children:":"})," MyComponentProps",e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token punctuation",children:"{"})," ",e(n.span,{className:"token operator",children:"..."})," ",e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token punctuation",children:")"}),e(n.span,{className:"token punctuation",children:";"}),`
`]})}),`
`,e(n.p,{children:["This allows the user of ",e(n.code,{children:"<MyComponent>"})," to use ",e(n.code,{children:"goodbye$"})," form as shown here:"]}),`
`,e(n.pre,{children:e(n.code,{className:"language-jsx",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token punctuation",children:"<"}),e(n.span,{className:"token class-name",children:"MyComponent"})]})," ",e(n.span,{className:"token attr-name",children:"goodbye$"}),e(n.span,{className:"token script language-javascript",children:[e(n.span,{className:"token script-punctuation punctuation",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),"goodbyeQrl",e(n.span,{className:"token punctuation",children:"}"})]})," ",e(n.span,{className:"token attr-name",children:"hello$"}),e(n.span,{className:"token script language-javascript",children:[e(n.span,{className:"token script-punctuation punctuation",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token punctuation",children:"{"}),e(n.span,{className:"token operator",children:"..."}),e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token punctuation",children:"}"})]})," ",e(n.span,{className:"token punctuation",children:"/>"})]}),`
`]})}),`
`,e(n.h2,{id:"using-callback-props",children:[e(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-callback-props",children:e(n.span,{className:"icon icon-link"})}),"Using callback props"]}),`
`,e(n.p,{children:["Notice that the ",e(n.code,{children:"<MyComponent>"})," component receives a callback function."]}),`
`,e(n.p,{children:["Passing the ",e(n.code,{children:"props.goodbye$"})," as a reference to the ",e(n.code,{children:"<button>"})]}),`
`,e(n.pre,{children:e(n.code,{className:"language-jsx",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token punctuation",children:"<"}),"button"]})," ",e(n.span,{className:"token attr-name",children:"onClick$"}),e(n.span,{className:"token script language-javascript",children:[e(n.span,{className:"token script-punctuation punctuation",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),"props",e(n.span,{className:"token punctuation",children:"."}),"goodbye$",e(n.span,{className:"token punctuation",children:"}"})]}),e(n.span,{className:"token punctuation",children:">"})]}),e(n.span,{className:"token plain-text",children:"hello"}),e(n.span,{className:"token tag",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token punctuation",children:"</"}),"button"]}),e(n.span,{className:"token punctuation",children:">"})]}),`
`]})}),`
`,e(n.p,{children:["Creating a new callback for ",e(n.code,{children:"<button>"})," and internally invoking the callback QRL."]}),`
`,e(n.pre,{children:e(n.code,{className:"language-jsx",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token punctuation",children:"<"}),"button"]}),`
  `,e(n.span,{className:"token attr-name",children:"onClick$"}),e(n.span,{className:"token script language-javascript",children:[e(n.span,{className:"token script-punctuation punctuation",children:"="}),e(n.span,{className:"token punctuation",children:"{"}),e(n.span,{className:"token keyword",children:"async"})," ",e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token punctuation",children:")"})," ",e(n.span,{className:"token operator",children:"=>"})," ",e(n.span,{className:"token punctuation",children:"{"}),`
    `,e(n.span,{className:"token keyword",children:"await"})," props",e(n.span,{className:"token punctuation",children:"."}),"helloQrl",e(n.span,{className:"token operator",children:"?."}),e(n.span,{className:"token function",children:"invoke"}),e(n.span,{className:"token punctuation",children:"("}),e(n.span,{className:"token string",children:"'World'"}),e(n.span,{className:"token punctuation",children:")"}),e(n.span,{className:"token punctuation",children:";"}),`
  `,e(n.span,{className:"token punctuation",children:"}"}),e(n.span,{className:"token punctuation",children:"}"})]}),`
`,e(n.span,{className:"token punctuation",children:">"})]}),e(n.span,{className:"token plain-text",children:`
  good bye
`}),e(n.span,{className:"token tag",children:[e(n.span,{className:"token tag",children:[e(n.span,{className:"token punctuation",children:"</"}),"button"]}),e(n.span,{className:"token punctuation",children:">"})]}),`
`]})}),`
`,e(n.p,{children:["This form allows the ",e(n.code,{children:"<button>"})," to invoke the callback with custom parameters. Notice that the invocation requires ",e(n.code,{children:"async"})," and ",e(n.code,{children:"await"})," as the QRLs are lazy-loaded."]})]})}function r(a={}){const{wrapper:n}=a.components||{};return n?e(n,Object.assign({},a,{children:e(s,a)})):s(a)}export{r as default,i as frontmatter,o as head,l as headings};
