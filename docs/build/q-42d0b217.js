import{i as n,u as t}from"./q-c0df5510.js";const o=[{text:"Redirects",id:"redirects",level:1}],r={title:"Qwik City - Redirects",meta:[],styles:[],links:[]},i={title:"Qwik City - Redirects"};function s(a){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",pre:"pre",code:"code",ul:"ul",li:"li"},a.components);return n(t,{children:[n(e.h1,{id:"redirects",children:[n(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#redirects",children:n(e.span,{className:"icon icon-link"})}),"Redirects"]}),`
`,n(e.p,{children:"Sometimes you want to redirect a user from the current page to another page."}),`
`,n(e.p,{children:"Let's say a user tries to go to a dashboard page but has not logged in yet. We want them to be redirected to a login page so they can be authenticated."}),`
`,n(e.pre,{children:n(e.code,{className:"language-typescript",children:[n(e.span,{className:"token comment",children:"// File: src/routes/dashboard.js"}),`
`,n(e.span,{className:"token keyword",children:"import"})," ",n(e.span,{className:"token punctuation",children:"{"})," component$ ",n(e.span,{className:"token punctuation",children:"}"})," ",n(e.span,{className:"token keyword",children:"from"})," ",n(e.span,{className:"token string",children:"'@builder.io/qwik'"}),n(e.span,{className:"token punctuation",children:";"}),`
`,n(e.span,{className:"token keyword",children:"import"})," ",n(e.span,{className:"token punctuation",children:"{"})," checkAuthorization ",n(e.span,{className:"token punctuation",children:"}"})," ",n(e.span,{className:"token keyword",children:"from"})," ",n(e.span,{className:"token string",children:"'../auth'"}),n(e.span,{className:"token punctuation",children:";"})," ",n(e.span,{className:"token comment",children:"// Your authorization code"}),`
`,n(e.span,{className:"token keyword",children:"import"})," ",n(e.span,{className:"token keyword",children:"type"})," ",n(e.span,{className:"token punctuation",children:"{"})," DashboardData ",n(e.span,{className:"token punctuation",children:"}"})," ",n(e.span,{className:"token keyword",children:"from"})," ",n(e.span,{className:"token string",children:"'../types'"}),n(e.span,{className:"token punctuation",children:";"})," ",n(e.span,{className:"token comment",children:"// Your types"}),`

`,n(e.span,{className:"token keyword",children:"export"})," ",n(e.span,{className:"token keyword",children:"const"})," onGet",n(e.span,{className:"token operator",children:":"})," RequestHandler",n(e.span,{className:"token operator",children:"<"}),"DashboardData",n(e.span,{className:"token operator",children:">"})," ",n(e.span,{className:"token operator",children:"="})," ",n(e.span,{className:"token keyword",children:"async"})," ",n(e.span,{className:"token punctuation",children:"("}),n(e.span,{className:"token punctuation",children:"{"})," request",n(e.span,{className:"token punctuation",children:","})," response ",n(e.span,{className:"token punctuation",children:"}"}),n(e.span,{className:"token punctuation",children:")"})," ",n(e.span,{className:"token operator",children:"=>"})," ",n(e.span,{className:"token punctuation",children:"{"}),`
  `,n(e.span,{className:"token keyword",children:"const"})," isAuthorized ",n(e.span,{className:"token operator",children:"="})," ",n(e.span,{className:"token function",children:"checkAuthorization"}),n(e.span,{className:"token punctuation",children:"("}),"request",n(e.span,{className:"token punctuation",children:"."}),"headers",n(e.span,{className:"token punctuation",children:"."}),n(e.span,{className:"token function",children:"get"}),n(e.span,{className:"token punctuation",children:"("}),n(e.span,{className:"token string",children:"'cookie'"}),n(e.span,{className:"token punctuation",children:")"}),n(e.span,{className:"token punctuation",children:")"}),n(e.span,{className:"token punctuation",children:";"}),`

  `,n(e.span,{className:"token keyword",children:"if"})," ",n(e.span,{className:"token punctuation",children:"("}),n(e.span,{className:"token operator",children:"!"}),"isAuthorized",n(e.span,{className:"token punctuation",children:")"})," ",n(e.span,{className:"token punctuation",children:"{"}),`
    `,n(e.span,{className:"token comment",children:"// User is not authorized!"}),`
    `,n(e.span,{className:"token comment",children:"// throw the redirect response to"}),`
    `,n(e.span,{className:"token comment",children:"// relocate the user to the log-in page"}),`
    `,n(e.span,{className:"token keyword",children:"throw"})," response",n(e.span,{className:"token punctuation",children:"."}),n(e.span,{className:"token function",children:"redirect"}),n(e.span,{className:"token punctuation",children:"("}),n(e.span,{className:"token string",children:"'/login'"}),n(e.span,{className:"token punctuation",children:")"}),n(e.span,{className:"token punctuation",children:";"}),`
  `,n(e.span,{className:"token punctuation",children:"}"})," ",n(e.span,{className:"token keyword",children:"else"})," ",n(e.span,{className:"token punctuation",children:"{"}),`
    `,n(e.span,{className:"token comment",children:"// ..."}),`
  `,n(e.span,{className:"token punctuation",children:"}"}),`
`,n(e.span,{className:"token punctuation",children:"}"}),n(e.span,{className:"token punctuation",children:";"}),`
`]})}),`
`,n(e.p,{children:["The ",n(e.code,{children:"response.redirect()"})," function takes a URL and optionally a status code as the second argument."]}),`
`,n(e.pre,{children:n(e.code,{className:"language-tsx",children:[n(e.span,{className:"token keyword",children:"throw"})," response",n(e.span,{className:"token punctuation",children:"."}),n(e.span,{className:"token function",children:"redirect"}),n(e.span,{className:"token punctuation",children:"("}),n(e.span,{className:"token string",children:"'/login'"}),n(e.span,{className:"token punctuation",children:","})," ",n(e.span,{className:"token number",children:"301"}),n(e.span,{className:"token punctuation",children:")"}),n(e.span,{className:"token punctuation",children:";"})," ",n(e.span,{className:"token comment",children:"// Moved Permanently"}),`
`]})}),`
`,n(e.p,{children:[n(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#redirection_messages",children:"Common redirect status codes"}),":"]}),`
`,n(e.ul,{children:[`
`,n(e.li,{children:[n(e.code,{children:"307"}),": Temporary Redirect. The server sends this response to direct the client to get the requested resource at another URI with the same method that was used in the prior request. This has the same semantics as the 302 Found HTTP response code, with the exception that the user agent must not change the HTTP method used: if a POST was used in the first request, a POST must be used in the second request."]}),`
`,n(e.li,{children:[n(e.code,{children:"308"}),": Permanent Redirect. This means that the resource is now permanently located at another URI, specified by the ",n(e.code,{children:"Location"})," HTTP Response header. This has the same semantics as the 301 Moved Permanently HTTP response code, with the exception that the user agent must not change the HTTP method used: if a POST was used in the first request, a POST must be used in the second request."]}),`
`]}),`
`,n(e.p,{children:["If you do not provide a status code, Qwik City will default to a ",n(e.code,{children:"307"})," Temporary Redirect status."]}),`
`,n(e.p,{children:["Read more about redirect status codes ",n(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#redirection_messages",children:"here"}),"."]})]})}function l(a={}){const{wrapper:e}=a.components||{};return e?n(e,Object.assign({},a,{children:n(s,a)})):s(a)}export{l as default,i as frontmatter,r as head,o as headings};
